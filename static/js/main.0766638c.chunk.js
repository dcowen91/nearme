(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(t,e,a){t.exports=a(58)},29:function(t,e,a){},30:function(t,e,a){},58:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),o=a(4),r=a.n(o),s=(a(29),a(16)),c=a(17),l=a(22),d=a(18),u=a(23),m=(a(30),a(3)),h=a(20),g=a.n(h),p=a(60),f=Object(m.d)({accessToken:"pk.eyJ1IjoiZGNvd2VuOTEiLCJhIjoiY2o4amwxazg5MDNmdDJ2anNmMTNiaThzeSJ9.JcuyCdKas70Xq8RDme7hCw"}),v=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(d.a)(e).call(this,t))).debouncedGetArticles=Object(p.a)(a.getArticles,500),a.state={latitude:47.6072062,longitude:-122.3350407,showErrorDialog:!1,selectedItemIndex:-1,items:[]},a}return Object(u.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=this;navigator.geolocation.getCurrentPosition(function(e){t.setState({latitude:e.coords.latitude,longitude:e.coords.longitude}),t.getArticles()},function(){t.setState({showErrorDialog:!0})})}},{key:"componentDidUpdate",value:function(t,e){e.latitude===this.state.latitude&&e.longitude===this.state.longitude||this.debouncedGetArticles()}},{key:"render",value:function(){var t=this;return i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},"NEARME"),i.a.createElement("div",{className:"mapContainer"},i.a.createElement("div",{className:"mapInner"},i.a.createElement(f,{style:"mapbox://styles/mapbox/dark-v10",containerStyle:{height:"100%",width:"100%"},center:[this.state.longitude,this.state.latitude],onMoveEnd:function(e){console.log("MOVED"),isNaN(e.transform._center.lat)||t.setState({latitude:e.transform._center.lat,longitude:e.transform._center.lng})}},this.renderPopUp(),i.a.createElement(m.b,{type:"symbol",id:"marker",layout:{"icon-image":"marker-15","icon-size":2}},this.state.items.map(function(e,a){return i.a.createElement(m.a,{coordinates:[e.longitude,e.latitude],onClick:function(){return t.setState({selectedItemIndex:a})}})}))))))}},{key:"renderPopUp",value:function(){if(this.state.selectedItemIndex>=0){var t=this.state.items[this.state.selectedItemIndex];return i.a.createElement(m.c,{coordinates:[t.longitude,t.latitude],offset:{"bottom-left":[12,-38],"bottom-right":[-12,-38]}},i.a.createElement("h4",null,t.title))}}},{key:"getArticles",value:function(){var t=this,e="https://en.wikipedia.org/w/api.php?action=query&list=geosearch&gsradius=10000&gscoord=".concat(this.state.latitude,"|").concat(this.state.longitude,"&format=json&origin=*");g.a.get(e).then(function(e){var a=e.data.query.geosearch.map(function(t){return{latitude:t.lat,longitude:t.lon,pageId:t.pageid,title:t.title}});t.setState({items:a})})}}]),e}(i.a.Component);r.a.render(i.a.createElement(v,null),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.0766638c.chunk.js.map